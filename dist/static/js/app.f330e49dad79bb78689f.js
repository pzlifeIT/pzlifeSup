webpackJsonp([1],{122:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},123:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{name:"linxin"}},methods:{quitlogin:function(){this.$router.push({path:"login"})},modifyPwd:function(){this.$router.push({path:"modifyPwd"})}}}},124:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(196),r=a.n(n),s=a(198),o=a.n(s);t.default={components:{vHead:r.a,vSidebar:o.a}}},125:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={computed:{onRoutes:function(){return this.$route.path.replace("/","")}}}},126:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["num","image"],data:function(){return{imageUrl:""}},mounted:function(){this.imageUrl=this.image},methods:{fileShow:function(){document.querySelector("#fileinp"+this.num).click()},fileChange:function(e){var t=e.target.files||e.dataTransfer.files,a=this;a.imageDeal(t[0],function(e){a.uploadfile(e)})},uploadfile:function(e){var t=this,a=new FormData;a.append("image",e),t.$request({data:a,url:"upload/uploadfile",success:function(e){console.log(t.num),t.imageUrl=e.image_path||"",t.$emit("upresult",{image_path:e.image_path,num:t.num})},complete:function(e){document.querySelector("#fileinp"+t.num).value=""},error:function(){t.$emit("upresult",{num:t.num})}})},imageDeal:function(e,t){var a=e;if(void 0!=a){if(a.size<=1048576)return void t(a);var n=new FileReader;n.readAsDataURL(a),n.onload=function(e){var a=e.target.result;console.log("压缩前："+a.length),suofang(a,1.5,t)}}},suofang:function(e){function t(t,a,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,a){console.log("执行缩放程序,bili="+t);var n=new Image;n.src=e,n.onload=function(){var e=document.createElement("canvas"),n=this.width/t,r=this.height/t;e.setAttribute("width",n),e.setAttribute("height",r),e.getContext("2d").drawImage(this,0,0,n,r);var s=e.toDataURL("image/jpeg");e.toBlob(function(e){if(e.size>1048576)suofang(s,t,a);else{var n=parseInt(1e5*Math.random()),r=dataURLtoFile(s,n+".jpg");a(e,r)}},"image/jpeg")}})}}},127:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a(50);t.default={data:function(){return{userinfo:{user:"",pwd:""}}},mounted:function(){},methods:{submitForm:function(){if(!this.userinfo.user)return void this.$message({message:"账号不能为空",type:"error"});if(!this.userinfo.pwd)return void this.$message({message:"密码不能为空",type:"error"})}}}},128:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},129:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(199),r=a.n(n),s=a(79),o=a.n(s),i=a(131);t.default={data:function(){return{a:"",boxcard:!1,qrcodeCard:!1,canCode:!1,image:"",tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]}},mounted:function(){},methods:{upresult:function(e){console.log(e)},toggleCard:function(e){this.boxcard=e},handleClick:function(e){this.qrcodeCard=!0,this.getQrcode(e.date)},hideQrcode:function(){this.qrcodeCard=!1,this.canCode=!1},getQrcode:function(e){var t=this;o.a.toCanvas(document.getElementById("qrcode"),e,function(e){if(e)throw new Error(e);t.canCode=!0})},downImg:function(){a.i(i.a)(document.getElementById("qrcode").toDataURL("image/png"),"推广活动")}},components:{vUpload:r.a}}},130:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){var e=this,t=function(e,t,a){if(!t)return a(new Error("原密码不能为空"));a()};return{ruleForm:{pass:"",checkPass:"",oldPwd:""},rules:{pass:[{validator:function(t,a,n){""===a?n(new Error("请输入新密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),n())},trigger:"blur"}],checkPass:[{validator:function(t,a,n){""===a?n(new Error("请再次输入密码")):a!==e.ruleForm.pass?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}],oldPwd:[{validator:t,trigger:"blur"}]}}},methods:{submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})},resetForm:function(e){this.$refs[e].resetFields()}}}},131:function(e,t,a){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photo";if(e){var a=new Image;console.log(e),a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0,a.width,a.height);var n=e.toDataURL("image/png"),r=document.createElement("a"),s=new MouseEvent("click");r.download=t,r.href=n,r.dispatchEvent(s)},a.src=e}}a.d(t,"a",function(){return n})},132:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),r=a(77),s=a.n(r),o=a(51),i=a(52),l=a.n(i),c=a(50),u=a(76);a.n(u);n.default.prototype.$request=c.a,n.default.use(l.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:o.a,template:"<App/>",components:{App:s.a},beforeCreate:function(){console.log("beforeCreated.....")}})},185:function(e,t){},186:function(e,t){},187:function(e,t){},188:function(e,t){},189:function(e,t){},190:function(e,t){},191:function(e,t){},192:function(e,t){},196:function(e,t,a){a(191);var n=a(3)(a(123),a(211),"data-v-dfd1af90",null);e.exports=n.exports},197:function(e,t,a){var n=a(3)(a(124),a(206),null,null);e.exports=n.exports},198:function(e,t,a){a(185);var n=a(3)(a(125),a(204),"data-v-165e40c1",null);e.exports=n.exports},199:function(e,t,a){a(190);var n=a(3)(a(126),a(210),"data-v-d62cc4e8",null);e.exports=n.exports},200:function(e,t,a){a(186);var n=a(3)(a(127),a(205),"data-v-224b60ea",null);e.exports=n.exports},201:function(e,t,a){a(192);var n=a(3)(a(128),a(212),"data-v-e4f0830a",null);e.exports=n.exports},202:function(e,t,a){a(188);var n=a(3)(a(129),a(208),"data-v-64e5b562",null);e.exports=n.exports},203:function(e,t,a){a(189);var n=a(3)(a(130),a(209),"data-v-a6e13668",null);e.exports=n.exports},204:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.onRoutes,theme:"dark","unique-opened":"",router:""}},[a("el-menu-item",{attrs:{index:"index"}},[a("span",{staticClass:"sb-icon"},[a("i",{staticClass:"material-icons"},[e._v("home")])]),e._v(" "),a("span",{staticClass:"sb-cn"},[e._v("首页")])]),e._v(" "),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("span",{staticClass:"sb-icon"},[a("i",{staticClass:"el-icon-setting"})]),e._v(" "),a("span",{staticClass:"sb-cn"},[e._v("市场推广管理")])]),e._v(" "),a("el-menu-item",{attrs:{index:"marketing"}},[e._v("市场推广")])],2)],1)],1)},staticRenderFns:[]}},205:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("el-card",{staticClass:"box-card"},[a("img",{staticClass:"logImg",attrs:{src:"https://webimages.pzlive.vip/776logo.png",alt:""}}),e._v(" "),a("el-form",{attrs:{"label-position":"top","label-width":"80px",model:e.userinfo}},[a("el-form-item",{attrs:{label:"账号:"}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.userinfo.user,callback:function(t){e.$set(e.userinfo,"user",t)},expression:"userinfo.user"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码:"}},[a("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.userinfo.pwd,callback:function(t){e.$set(e.userinfo,"pwd",t)},expression:"userinfo.pwd"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("登录")])],1)],1)],1)],1)},staticRenderFns:[]}},206:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("v-head"),e._v(" "),a("v-sidebar"),e._v(" "),a("div",{staticClass:"content"},[a("transition",{attrs:{name:"move",mode:"out-in"}},[a("router-view")],1)],1)],1)},staticRenderFns:[]}},207:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]}},208:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"marketing"}},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(t){return e.toggleCard(!0)}}},[e._v("新建推广活动")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("二维码")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("编辑")])]}}])})],1),e._v(" "),e.boxcard?a("div",{staticClass:"suspension"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("推广活动")])]),e._v(" "),a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"活动标题"}},[a("el-input",{attrs:{placeholder:"请输入活动标题"},model:{value:e.a,callback:function(t){e.a=t},expression:"a"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分享标题"}},[a("el-input",{attrs:{placeholder:"请输入微信分享标题"},model:{value:e.a,callback:function(t){e.a=t},expression:"a"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分享次数"}},[a("el-input",{attrs:{placeholder:"请输入微信分享次数"},model:{value:e.a,callback:function(t){e.a=e._n(t)},expression:"a"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动展示大图"}},[a("v-upload",{attrs:{num:1,image:e.image},on:{upresult:e.upresult}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信转发分享图片"}},[a("v-upload",{attrs:{num:2,image:e.image},on:{upresult:e.upresult}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分享成功页面图片"}},[a("v-upload",{attrs:{num:3,image:e.image},on:{upresult:e.upresult}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{on:{click:function(t){return e.toggleCard(!1)}}},[e._v("取消")])],1)],1)],1)],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.qrcodeCard,expression:"qrcodeCard"}],staticClass:"suspension"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("二维码")])]),e._v(" "),a("el-form",[a("el-form-item",[a("canvas",{directives:[{name:"show",rawName:"v-show",value:e.canCode,expression:"canCode"}],attrs:{id:"qrcode",width:"200",height:"200"}})]),e._v(" "),a("el-form-item",{staticClass:"flex-cen"},[a("el-button",{staticClass:"codebtn",attrs:{type:"primary"},on:{click:function(t){return e.downImg()}}},[e._v("下载")]),e._v(" "),a("el-button",{staticClass:"codebtn",on:{click:function(t){return e.hideQrcode(!1)}}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},209:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("修改密码")])]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"原密码",prop:"oldPwd"}},[a("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.oldPwd,callback:function(t){e.$set(e.ruleForm,"oldPwd",t)},expression:"ruleForm.oldPwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]}},210:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:e.num}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl},on:{click:e.fileShow}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:e.fileShow}}),e._v(" "),a("input",{staticClass:"hide",attrs:{type:"file",name:"",id:"fileinp"+e.num},on:{change:e.fileChange}})])},staticRenderFns:[]}},211:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:16,sm:16,md:22}},[a("div",{staticClass:"logo"},[a("span",{staticClass:"logo_prefix"},[e._v("品质生活广场")]),a("span",{staticClass:"logo_suffix"},[e._v("CMS")])])]),e._v(" "),a("el-col",{staticClass:"fr",attrs:{xs:8,sm:8,md:2}},[a("div",{staticClass:"user-header"},[a("el-dropdown",{attrs:{trigger:"click","menu-align":"start"}},[a("span",{staticClass:"el-dropdown-link"},[a("span",{staticClass:"name"},[e._v("这是个名字")]),e._v(" "),a("img",{staticClass:"userImg",attrs:{src:"https://webimages.pzlive.vip/776logo.png",width:"50px"}})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"setting-div",on:{click:e.modifyPwd}},[a("span",{staticClass:"setting-icon"},[a("i",{staticClass:"material-icons"},[e._v("account_box")])]),e._v(" "),a("span",{staticClass:"setting-string"},[e._v("修改密码")])])]),e._v(" "),a("el-dropdown-item",{attrs:{divided:""}},[a("div",{staticClass:"setting-div",on:{click:e.quitlogin}},[a("span",{staticClass:"setting-icon"},[a("i",{staticClass:"material-icons"},[e._v("assignment_return")])]),e._v(" "),a("span",{staticClass:"setting-string"},[e._v("退出登录")])])])],1)],1)],1)])],1)],1)},staticRenderFns:[]}},212:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("什么都没有")])},staticRenderFns:[]}},50:function(e,t,a){"use strict";function n(e){var t=null;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var a="https://wwwapi.pzlive.vip/admin/";a+=e.url;var n=r(e.type),s=Math.random();if(e.data=e.data||"",!(e.data instanceof FormData)&"object"==f()(e.data)&"POST"==n&&(e.data=u()(e.data)),"GET"==n){var o="";for(var i in e.data)o+=i+"="+e.data[i]+"&";e.data=o.replace(/&$/,"")}"GET"==n?(e.data?t.open("GET",a+"?"+e.data,!0):t.open("GET",a+"?t="+s,!0),t.send()):"POST"==n&&(t.open("POST",a,!0),e.data instanceof FormData||t.setRequestHeader("Content-type","text/plain","charset=utf-8"),t.send(e.data)),t.onreadystatechange=function(){4==t.readyState&&(200==t.status?e.success(JSON.parse(t.responseText)):"function"==typeof e.failed&&e.failed(t.status))}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"post";return e=e.toUpperCase()}function s(e){var t="";switch(parseInt(e)){case 201:case 202:case 203:case 204:case 205:case 206:t="服务器无响应";break;case 400:t="错误请求";break;case 401:t="身份验证错误";break;case 403:t="服务器拒绝请求";break;case 404:case 410:t="404错误";break;case 405:t="方法禁用";break;case 406:t="不接受请求";break;case 407:t="需要代理授权";break;case 408:t="请求超时";break;case 409:case 411:case 412:case 415:case 416:case 417:t="请求格式出错";break;case 413:t="请求实体过大";break;case 414:t="请求的URI过长";break;case 500:case 501:case 502:case 503:case 504:case 505:t="服务器错误";break;default:t="网络错误"}i(t)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e instanceof FormData?e.append("cms_con_id",localStorage.getItem("cms_con_id")||""):e.cms_con_id=localStorage.getItem("cms_con_id")||"",e}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";a.i(p.Message)({message:e||"",type:t})}function l(){m.a.push({path:"login"})}a.d(t,"a",function(){return v});var c=a(133),u=a.n(c),d=a(18),f=a.n(d),p=a(52),m=(a.n(p),a(51));localStorage.setItem("cms_con_id","5047914e4ce85db2a960c2757b998fde");var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.url)throw new Error("url 未传值");if(!localStorage.getItem("cms_con_id")&!e.login)return void l();var t="";e.login||(t=o(e.data));var a=p.Loading.service({fullscreen:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});n({data:t,url:e.url,type:e.type,success:function(t){if(a.close(),!e.login&"5000"==t.code)return void l();"200"==t.code||"3000"==t.code?"function"==typeof e.success&&e.success(t):"3100"==t.code?i("没有权限"):"function"==typeof e.error&&e.error(t.code),"function"==typeof e.complete&&e.complete(t)},failed:function(t){a.close(),"function"==typeof e.failed&&e.failed(res),s(t)}})}},51:function(e,t,a){"use strict";(function(e){var n=a(2),r=a(213),s=a(197),o=a.n(s),i=a(201),l=a.n(i),c=a(202),u=a.n(c),d=a(203),f=a.n(d),p=a(200),m=a.n(p);n.default.use(r.a),t.a=new r.a({mode:"history",base:e,routes:[{path:"/",component:o.a,children:[{path:"",component:l.a},{path:"/index",component:l.a},{path:"/marketing",component:u.a},{path:"/modifyPwd",component:f.a}]},{path:"/login",component:m.a}]})}).call(t,"/")},76:function(e,t){},77:function(e,t,a){a(187);var n=a(3)(a(122),a(207),null,null);e.exports=n.exports}},[132]);